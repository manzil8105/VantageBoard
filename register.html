<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Register</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="page-auth">
    <main class="auth-shell">
      <section class="auth-card">
        <h1 class="brand-title">Create Account</h1>
        <form id="registerForm" class="auth-form">
          <div class="field">
            <label>Username</label><input type="text" id="username" required />
          </div>
          <div class="field">
            <label>Email</label><input type="email" id="email" required />
          </div>
          <div class="field">
            <label>Password (Min 6 chars)</label
            ><input type="password" id="password" required />
          </div>
          <div class="field">
            <label>Confirm Password</label
            ><input type="password" id="confirmPassword" required />
          </div>
          <button class="btn primary" type="submit">Register</button>
          <p class="signup-prompt">
            Already have an account?
            <a href="login.html" class="link">Log In</a>
          </p>
        </form>
      </section>
    </main>
    <script>
      document.getElementById("registerForm").onsubmit = async (e) => {
        e.preventDefault();
        const p1 = document.getElementById("password").value;
        const p2 = document.getElementById("confirmPassword").value;

        if (p1.length < 6)
          return alert("Password must be at least 6 characters.");
        if (p1 !== p2) return alert("Passwords do not match.");

        const data = {
          username: document.getElementById("username").value,
          email: document.getElementById("email").value,
          password: p1,
        };

        try {
          const res = await fetch("http://localhost:3000/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
          });
          const result = await res.json();
          alert(result.msg);
          if (res.ok) window.location.href = "login.html";
        } catch (e) {
          alert("Error connecting to server");
        }
      };
    </script>
  </body>
</html>
